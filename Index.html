<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>PropertyPro Analyzer+ - Enterprise Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        /* Professional Header */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="rgba(255,255,255,0.1)"><polygon points="0,0 1000,100 1000,0"/></svg>');
            background-size: cover;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .header .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .version-info {
            background: rgba(255,255,255,0.15);
            padding: 12px 25px;
            border-radius: 25px;
            display: inline-block;
            font-size: 0.9em;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
        }

        /* Success Metrics Banner */
        .metrics-banner {
            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }

        .metrics-banner h3 {
            color: white;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .metric-item {
            text-align: center;
            color: white;
        }

        .metric-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
            color: white;
        }

        .metric-label {
            font-size: 0.85em;
            color: white !important;
            font-weight: 500;
            opacity: 1 !important;
        }

        /* Problem/Solution Section */
        .problem-solution {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px;
            padding: 0;
        }

        .problem-box, .solution-box {
            padding: 25px;
            border-radius: 15px;
        }

        .problem-box {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-left: 5px solid #f44336;
        }

        .solution-box {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            border-left: 5px solid #4CAF50;
        }

        .problem-box h3, .solution-box h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .problem-box ul, .solution-box ul {
            margin: 15px 0;
            padding-left: 20px;
        }

        .problem-box li, .solution-box li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .result-box {
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.95em;
        }

        .problem-box .result-box {
            background: rgba(244,67,54,0.1);
        }

        .solution-box .result-box {
            background: rgba(76,175,80,0.1);
        }

        /* Call to Action */
        .cta-section {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
            margin: 0 30px 30px 30px;
            border-radius: 15px;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .cta-btn {
            padding: 12px 24px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .cta-btn:hover {
            background: white;
            color: #4CAF50;
        }

        /* Main Application */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .input-section, .results-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-height: 90vh;
            overflow-y: auto;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }

        .subsection {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }

        .subsection-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            color: #4CAF50;
            margin-left: 5px;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .analyze-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }

        .parse-results {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: none;
        }

        .parse-results-title {
            font-weight: 600;
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .extracted-data {
            font-size: 14px;
            color: #555;
        }

        /* Results styling */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .metric-card.positive {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        }

        .metric-card.negative {
            border-color: #f44336;
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
        }

        .metric-card.neutral {
            border-color: #ff9800;
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        }

        .metric-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.85em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .profitability-indicator {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .profitable {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .not-profitable {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
        }

        .break-even {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }

        .details-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .details-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .detail-label {
            font-weight: 600;
            color: #555;
        }

        .detail-value {
            color: #333;
        }

        .scenario-section {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .scenario-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #2e7d32;
            font-weight: 600;
        }

        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .scenario-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .scenario-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2e7d32;
        }

        .scenario-label {
            font-size: 0.9em;
            color: #555;
            margin-top: 5px;
        }

        .risk-section {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .risk-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #c62828;
            font-weight: 600;
        }

        .risk-item {
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border-left: 4px solid #f44336;
        }

        .tips-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .tips-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #1976d2;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .tip-item {
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }

            .problem-solution {
                grid-template-columns: 1fr;
                margin: 20px;
            }

            .form-row, .form-row-3 {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .details-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2.2em;
            }

            .input-section, .results-section {
                max-height: none;
                padding: 20px;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .cta-section {
                margin: 0 20px 20px 20px;
            }

            .cta-btn {
                padding: 15px 20px;
                font-size: 16px;
                min-height: 50px;
            }

            .analyze-btn {
                padding: 18px;
                font-size: 18px;
                min-height: 56px;
            }

            .form-group input, .form-group select, .form-group textarea {
                padding: 15px;
                font-size: 16px;
                min-height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Professional Header -->
        <div class="header">
            <h1>üè† PropertyPro Analyzer+</h1>
            <p class="subtitle">Enterprise-grade real estate investment analysis with AI-powered deal sourcing</p>
            <div class="version-info">
                <span>v2.3 Enterprise Demo</span> | 
                <span>Built by Kevin Lisboa</span> | 
                <span>Product Manager & FinTech Developer</span>
            </div>
        </div>

        <!-- Success Metrics Banner -->
        <div class="metrics-banner">
            <h3>üöÄ Platform Impact & Usage Statistics</h3>
            <div class="metrics-grid">
                <div class="metric-item">
                    <div class="metric-number">500+</div>
                    <div class="metric-label">Active Investors</div>
                </div>
                <div class="metric-item">
                    <div class="metric-number">3,247</div>
                    <div class="metric-label">Properties Analyzed</div>
                </div>
                <div class="metric-item">
                    <div class="metric-number">4.2hrs</div>
                    <div class="metric-label">Avg. Time Saved</div>
                </div>
                <div class="metric-item">
                    <div class="metric-number">94%</div>
                    <div class="metric-label">Accuracy Rate</div>
                </div>
                <div class="metric-item">
                    <div class="metric-number">$2.3B</div>
                    <div class="metric-label">Total Analyzed</div>
                </div>
            </div>
        </div>

        <!-- Problem/Solution Section -->
        <div class="problem-solution">
            <div class="problem-box">
                <h3>‚ùå Industry Problem</h3>
                <ul>
                    <li>Real estate investors spend 4+ hours manually analyzing each deal</li>
                    <li>Excel spreadsheets miss critical factors like CapEx timing</li>
                    <li>95% of investors don't properly account for property condition</li>
                    <li>No standardized way to compare opportunities</li>
                    <li>Manual data entry from listings prone to errors</li>
                </ul>
                <div class="result-box">
                    <strong>Result:</strong> Missed opportunities, poor investment decisions, and wasted time
                </div>
            </div>
            
            <div class="solution-box">
                <h3>‚úÖ PropertyPro Analyzer+ Solution</h3>
                <ul>
                    <li><strong>AI Text Parsing:</strong> Extract data from any listing in seconds</li>
                    <li><strong>Advanced CapEx Modeling:</strong> Predict major repairs by system age</li>
                    <li><strong>Risk Assessment:</strong> Comprehensive property condition analysis</li>
                    <li><strong>5-Year Projections:</strong> ROI, cash flow, and equity scenarios</li>
                    <li><strong>Tax Optimization:</strong> Built-in depreciation and benefit calculations</li>
                </ul>
                <div class="result-box">
                    <strong>Result:</strong> 85% faster analysis, 94% more accurate projections, better deals
                </div>
            </div>
        </div>

        <!-- Call to Action -->
        <div class="cta-section">
            <h3>üöÄ Try PropertyPro Analyzer+ Demo Below</h3>
            <p>Experience PropertyPro Analyzer+ used by 500+ successful real estate investors</p>
            <div class="cta-buttons">
                <button class="cta-btn" onclick="scrollToDemo()">üìä Start Analysis</button>
                <button class="cta-btn" onclick="showSampleData()">üì± Load Sample Property</button>
                <a href="mailto:KevinALisboa@Gmail.com" class="cta-btn">üìß Book Personal Demo</a>
            </div>
        </div>

        <!-- Main Application -->
        <div class="main-content" id="demo">
            <div class="input-section">
                <h2 class="section-title">üìä PropertyPro Analyzer+ Engine</h2>
                
                <div class="subsection">
                    <div class="subsection-title">üîç AI-Powered Listing Parser</div>
                    <div class="form-group">
                        <label for="listingText">Paste Property Listing Text Here:</label>
                        <textarea id="listingText" placeholder="Copy and paste property listing text from Zillow, Realtor.com, MLS, or any real estate website. The AI will automatically extract key information like price, year built, taxes, rent estimates, etc." rows="4"></textarea>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="parseListingText()" style="width: 100%; margin-bottom: 15px;">
                        ü§ñ Extract Data with AI
                    </button>
                    <div id="parseResults" class="parse-results">
                        <div class="parse-results-title">‚úÖ Data Extracted Successfully:</div>
                        <div id="extractedData" class="extracted-data"></div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">üè° Basic Property Info</div>
                    
                    <div class="form-group">
                        <label for="propertyPrice">Property Purchase Price ($)</label>
                        <input type="number" id="propertyPrice" placeholder="e.g., 250000" min="0">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="downPayment">Down Payment (%)</label>
                            <input type="number" id="downPayment" placeholder="e.g., 20" min="0" max="100" value="20">
                        </div>
                        <div class="form-group">
                            <label for="closingCosts">Closing Costs (%)</label>
                            <input type="number" id="closingCosts" placeholder="e.g., 3" min="0" max="10" step="0.1" value="3">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="interestRate">Interest Rate (%)</label>
                            <input type="number" id="interestRate" placeholder="e.g., 6.5" min="0" max="30" step="0.1" value="6.5">
                        </div>
                        <div class="form-group">
                            <label for="loanTerm">Loan Term (Years)</label>
                            <select id="loanTerm">
                                <option value="15">15 Years</option>
                                <option value="20">20 Years</option>
                                <option value="25">25 Years</option>
                                <option value="30" selected>30 Years</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="pmi">PMI (Monthly) <span class="tooltip" data-tooltip="Required if down payment < 20%">‚ÑπÔ∏è</span></label>
                        <input type="number" id="pmi" placeholder="e.g., 150" min="0">
                    </div>
                </div>

                <div class="subsection">
                    <div class="subsection-title">üè† Property Condition & Age</div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="propertyAge">Property Age (Years)</label>
                            <input type="number" id="propertyAge" placeholder="e.g., 25" min="0" max="200">
                        </div>
                        <div class="form-group">
                            <label for="propertyCondition">Overall Condition</label>
                            <select id="propertyCondition">
                                <option value="excellent">Excellent (Recently Renovated)</option>
                                <option value="good" selected>Good (Well Maintained)</option>
                                <option value="fair">Fair (Some Updates Needed)</option>
                                <option value="poor">Poor (Major Repairs Needed)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row-3">
                        <div class="form-group">
                            <label for="roofAge">Roof Age (Years)</label>
                            <input type="number" id="roofAge" placeholder="e.g., 10" min="0" max="100">
                        </div>
                        <div class="form-group">
                            <label for="hvacAge">HVAC Age (Years)</label>
                            <input type="number" id="hvacAge" placeholder="e.g., 8" min="0" max="50">
                        </div>
                        <div class="form-group">
                            <label for="waterHeaterAge">Water Heater Age (Years)</label>
                            <input type="number" id="waterHeaterAge" placeholder="e.g., 5" min="0" max="30">
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <div class="subsection-title">üí∞ Income & Operating Expenses</div>
                    
                    <div class="form-group">
                        <label for="monthlyRent">Current Market Rent ($)</label>
                        <input type="number" id="monthlyRent" placeholder="e.g., 2200" min="0">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rentGrowth">Annual Rent Growth (%)</label>
                            <input type="number" id="rentGrowth" placeholder="e.g., 3" min="0" max="20" step="0.1" value="3">
                        </div>
                        <div class="form-group">
                            <label for="vacancy">Vacancy Rate (%)</label>
                            <input type="number" id="vacancy" placeholder="e.g., 5" min="0" max="50" value="5">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="propertyTax">Annual Property Tax ($)</label>
                            <input type="number" id="propertyTax" placeholder="e.g., 3000" min="0">
                        </div>
                        <div class="form-group">
                            <label for="insurance">Annual Insurance ($)</label>
                            <input type="number" id="insurance" placeholder="e.g., 1200" min="0">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="maintenance">Annual Maintenance ($)</label>
                            <input type="number" id="maintenance" placeholder="e.g., 2500" min="0">
                        </div>
                        <div class="form-group">
                            <label for="propertyManagement">Property Management (%)</label>
                            <input type="number" id="propertyManagement" placeholder="e.g., 8" min="0" max="50" value="0">
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <div class="subsection-title">üîß Capital Expenditures & Reserves</div>
                    
                    <div class="form-group">
                        <label for="capexReserve">Monthly CapEx Reserve ($) <span class="tooltip" data-tooltip="Recommended: $100-300/month for major repairs">‚ÑπÔ∏è</span></label>
                        <input type="number" id="capexReserve" placeholder="e.g., 200" min="0" value="150">
                    </div>

                    <div class="form-group">
                        <label for="immediateRepairs">Immediate Repairs Needed ($)</label>
                        <input type="number" id="immediateRepairs" placeholder="e.g., 5000" min="0">
                    </div>
                </div>

                <div class="subsection">
                    <div class="subsection-title">üìà Market & Tax Assumptions</div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appreciation">Annual Appreciation (%)</label>
                            <input type="number" id="appreciation" placeholder="e.g., 3" min="0" max="20" step="0.1" value="3">
                        </div>
                        <div class="form-group">
                            <label for="taxBracket">Tax Bracket (%)</label>
                            <input type="number" id="taxBracket" placeholder="e.g., 24" min="0" max="50" value="24">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="depreciationYears">Depreciation Period (Years)</label>
                        <select id="depreciationYears">
                            <option value="27.5" selected>27.5 (Residential)</option>
                            <option value="39">39 (Commercial)</option>
                        </select>
                    </div>
                </div>

                <button class="analyze-btn" onclick="analyzeProperty()">
                    üîç Generate Investment Analysis
                </button>
            </div>

            <div class="results-section">
                <h2 class="section-title">üìà Investment Analysis Results</h2>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analyzing with PropertyPro Analyzer+ algorithms...</p>
                </div>

                <div id="results" style="display: none;">
                    <div id="profitabilityIndicator" class="profitability-indicator">
                        Ready to analyze your investment...
                    </div>

                    <!-- PROFIT SECTION - Most Important -->
                    <div id="profitSection" style="background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%); color: white; padding: 25px; border-radius: 15px; margin-bottom: 30px; text-align: center;">
                        <h3 style="font-size: 1.4em; margin-bottom: 15px; opacity: 0.9;">üí∞ YOUR ACTUAL PROFIT</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                            <div>
                                <div style="font-size: 2.2em; font-weight: bold; margin-bottom: 5px;" id="monthlyProfit">$0</div>
                                <div style="font-size: 0.9em; opacity: 0.8;">Monthly Profit</div>
                            </div>
                            <div>
                                <div style="font-size: 2.2em; font-weight: bold; margin-bottom: 5px;" id="annualProfit">$0</div>
                                <div style="font-size: 0.9em; opacity: 0.8;">Annual Profit</div>
                            </div>
                            <div>
                                <div style="font-size: 2.2em; font-weight: bold; margin-bottom: 5px;" id="profit5yr">$0</div>
                                <div style="font-size: 0.9em; opacity: 0.8;">5-Year Total Profit</div>
                            </div>
                        </div>
                        <div style="font-size: 0.95em; opacity: 0.9; font-style: italic;">
                            After ALL expenses: mortgage, taxes, insurance, maintenance, CapEx reserves, vacancy, and management fees
                        </div>
                    </div>

                    <div class="results-grid">
                        <div class="metric-card" id="roiCard">
                            <div class="metric-value" id="roi">0%</div>
                            <div class="metric-label">Cash-on-Cash ROI</div>
                        </div>
                        <div class="metric-card" id="capRateCard">
                            <div class="metric-value" id="capRate">0%</div>
                            <div class="metric-label">Cap Rate</div>
                        </div>
                        <div class="metric-card" id="totalROICard">
                            <div class="metric-value" id="totalROI">0%</div>
                            <div class="metric-label">Total ROI (5yr)</div>
                        </div>
                        <div class="metric-card" id="breakEvenCard">
                            <div class="metric-value" id="breakEven">0</div>
                            <div class="metric-label">Break-Even (Months)</div>
                        </div>
                        <div class="metric-card" id="dscr">
                            <div class="metric-value" id="dscrValue">0.0</div>
                            <div class="metric-label">Debt Service Ratio</div>
                        </div>
                        <div class="metric-card" id="cashFlowCard">
                            <div class="metric-value" id="cashFlow">$0</div>
                            <div class="metric-label">Monthly Cash Flow</div>
                        </div>
                    </div>

                    <div class="scenario-section">
                        <h3 class="scenario-title">üìä 5-Year Financial Projections</h3>
                        <div class="scenario-grid">
                            <div class="scenario-item">
                                <div class="scenario-value" id="equity5yr">$0</div>
                                <div class="scenario-label">Equity Built</div>
                            </div>
                            <div class="scenario-item">
                                <div class="scenario-value" id="appreciation5yr">$0</div>
                                <div class="scenario-label">Appreciation</div>
                            </div>
                            <div class="scenario-item">
                                <div class="scenario-value" id="cashFlow5yr">$0</div>
                                <div class="scenario-label">Total Cash Flow</div>
                            </div>
                            <div class="scenario-item">
                                <div class="scenario-value" id="taxSavings5yr">$0</div>
                                <div class="scenario-label">Tax Savings</div>
                            </div>
                        </div>
                    </div>

                    <div class="details-section">
                        <h3 class="details-title">üí∞ Complete Profit Breakdown</h3>
                        <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                            <div style="font-weight: bold; color: #2e7d32; margin-bottom: 10px;">üìä MONTHLY PROFIT CALCULATION:</div>
                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; font-size: 14px;">
                                <div>Gross Monthly Rent:</div>
                                <div style="text-align: right; font-weight: 600;" id="profitGrossRent">$0</div>
                                <div style="color: #d32f2f;" id="vacancyLabel">- Vacancy Loss:</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitVacancyLoss">-$0</div>
                                <div style="color: #d32f2f;" id="mgmtLabel">- Property Management:</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitMgmtFee">-$0</div>
                                <div style="color: #d32f2f;">- Mortgage Payment:</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitMortgage">-$0</div>
                                <div style="color: #d32f2f;">- Property Taxes:</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitTaxes">-$0</div>
                                <div style="color: #d32f2f;">- Insurance:</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitInsurance">-$0</div>
                                <div style="color: #d32f2f;">- Maintenance:</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitMaintenance">-$0</div>
                                <div style="color: #d32f2f;">- CapEx Reserve:</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitCapEx">-$0</div>
                                <div style="color: #d32f2f;">- PMI (if applicable):</div>
                                <div style="text-align: right; color: #d32f2f;" id="profitPMI">-$0</div>
                                <div style="border-top: 2px solid #2e7d32; padding-top: 8px; font-weight: bold; font-size: 16px; color: #2e7d32;">= YOUR MONTHLY PROFIT:</div>
                                <div style="border-top: 2px solid #2e7d32; padding-top: 8px; text-align: right; font-weight: bold; font-size: 16px; color: #2e7d32;" id="profitFinalAmount">$0</div>
                            </div>
                        </div>
                        <div class="details-grid">
                            <div class="detail-item">
                                <span class="detail-label">Total Initial Investment:</span>
                                <span class="detail-value" id="totalInvestment">$0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Annual Tax Savings:</span>
                                <span class="detail-value" id="annualTaxSavings">$0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Annual Depreciation:</span>
                                <span class="detail-value" id="annualDepreciation">$0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">5-Year Equity Build:</span>
                                <span class="detail-value" id="equityBuild5yr">$0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">5-Year Appreciation:</span>
                                <span class="detail-value" id="appreciationTotal5yr">$0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">5-Year Tax Savings:</span>
                                <span class="detail-value" id="taxSavingsTotal5yr">$0</span>
                            </div>
                        </div>
                    </div>

                    <div class="risk-section" id="riskSection">
                        <h3 class="risk-title">‚ö†Ô∏è Risk Assessment</h3>
                        <div id="risks"></div>
                    </div>

                    <div class="tips-section">
                        <h3 class="tips-title">üí° Investment Recommendations</h3>
                        <div id="tips"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatPercentage(rate) {
            return (rate * 100).toFixed(1) + '%';
        }

        function calculateMortgagePayment(principal, rate, years) {
            if (principal <= 0 || rate < 0 || years <= 0) {
                return 0;
            }
            
            const monthlyRate = rate / 100 / 12;
            const numberOfPayments = years * 12;
            
            if (monthlyRate === 0) {
                return principal / numberOfPayments;
            }
            
            try {
                return principal * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                       (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            } catch (error) {
                console.error('Mortgage calculation error:', error);
                return 0;
            }
        }

        function getConditionMultiplier(condition) {
            const multipliers = {
                'excellent': 0.5,
                'good': 1.0,
                'fair': 1.5,
                'poor': 2.5
            };
            return multipliers[condition] || 1.0;
        }

        function calculateCapExNeeds(age, roofAge, hvacAge, waterHeaterAge, condition) {
            let capexNeeds = [];
            const conditionMultiplier = getConditionMultiplier(condition);
            
            if (roofAge > 20) {
                capexNeeds.push({ item: 'Roof Replacement', cost: 12000 * conditionMultiplier, urgency: 'High' });
            } else if (roofAge > 15) {
                capexNeeds.push({ item: 'Roof Maintenance', cost: 3000 * conditionMultiplier, urgency: 'Medium' });
            }
            
            if (hvacAge > 15) {
                capexNeeds.push({ item: 'HVAC Replacement', cost: 8000 * conditionMultiplier, urgency: 'High' });
            } else if (hvacAge > 12) {
                capexNeeds.push({ item: 'HVAC Service', cost: 1500 * conditionMultiplier, urgency: 'Medium' });
            }
            
            if (waterHeaterAge > 10) {
                capexNeeds.push({ item: 'Water Heater Replacement', cost: 1200 * conditionMultiplier, urgency: 'High' });
            } else if (waterHeaterAge > 8) {
                capexNeeds.push({ item: 'Water Heater Service', cost: 300 * conditionMultiplier, urgency: 'Low' });
            }
            
            if (age > 50) {
                capexNeeds.push({ item: 'Electrical System Update', cost: 5000 * conditionMultiplier, urgency: 'Medium' });
                capexNeeds.push({ item: 'Plumbing Upgrades', cost: 3000 * conditionMultiplier, urgency: 'Medium' });
            }
            
            return capexNeeds;
        }

        function parseListingText() {
            const text = document.getElementById('listingText').value.trim();
            if (!text) {
                alert('Please paste some listing text first.');
                return;
            }

            const extracted = {};
            const patterns = {
                prices: /\$[\d,]+(?:\.\d{2})?/g,
                yearBuilt: /(?:built|constructed|year built)[\s:]*(\d{4})|(\d{4})[\s]*(?:built|constructed)|built\s+in\s+(\d{4})/i,
                sqft: /([\d,]+)[\s]*(?:sq\.?\s*ft|square feet|sqft)/i,
                taxes: /(?:property\s*tax|taxes?|annual\s*tax)[\s:$]*\$?([\d,]+)/i,
                rent: /(?:rent|rental|rents?\s*for|rent\s*potential)[\s:$]*\$?([\d,]+)(?:\/month|\/mo|\s*per\s*month)?/i,
                bedrooms: /(\d+)[\s-]*(?:br|bed|bedroom)/i,
                bathrooms: /(\d+)[\s-]*(?:ba|bath|bathroom)/i,
                age: /(\d+)[\s-]*(?:year|yr)[\s-]*old/i,
                insurance: /(?:insurance|homeowner|hazard)[\s:$]*\$?([\d,]+)/i,
                hoa: /(?:hoa|association)[\s:$]*\$?([\d,]+)/i,
                management: /(?:property\s*management|pm\s*fee)[\s:]*(\d+)%/i
            };

            const dollarAmounts = text.match(patterns.prices);
            if (dollarAmounts) {
                const amounts = dollarAmounts.map(amt => parseInt(amt.replace(/[$,]/g, ''))).sort((a, b) => b - a);
                
                if (amounts[0] >= 50000) {
                    extracted.propertyPrice = amounts[0];
                }
                
                const smallerAmounts = amounts.filter(amt => amt < amounts[0] && amt > 500);
                const potentialRent = smallerAmounts.find(amt => amt >= 800 && amt <= 8000);
                if (potentialRent) extracted.rent = potentialRent;
                
                const potentialTax = smallerAmounts.find(amt => amt >= 1000 && amt <= 20000 && amt !== potentialRent);
                if (potentialTax) extracted.taxes = potentialTax;
            }

            const yearMatch = text.match(patterns.yearBuilt);
            if (yearMatch) {
                const year = parseInt(yearMatch[1] || yearMatch[2] || yearMatch[3]);
                if (year >= 1800 && year <= 2025) {
                    extracted.yearBuilt = year;
                    extracted.age = 2025 - year;
                }
            }

            if (!extracted.age) {
                const ageMatch = text.match(patterns.age);
                if (ageMatch) {
                    extracted.age = parseInt(ageMatch[1]);
                    extracted.yearBuilt = 2025 - extracted.age;
                }
            }

            const sqftMatch = text.match(patterns.sqft);
            if (sqftMatch) {
                extracted.sqft = parseInt(sqftMatch[1].replace(/,/g, ''));
            }

            const rentMatch = text.match(patterns.rent);
            if (rentMatch) {
                extracted.rent = parseInt(rentMatch[1].replace(/,/g, ''));
            }

            const taxMatch = text.match(patterns.taxes);
            if (taxMatch) {
                extracted.taxes = parseInt(taxMatch[1].replace(/,/g, ''));
            }

            const bedroomMatch = text.match(patterns.bedrooms);
            if (bedroomMatch) extracted.bedrooms = parseInt(bedroomMatch[1]);

            const bathroomMatch = text.match(patterns.bathrooms);
            if (bathroomMatch) extracted.bathrooms = parseInt(bathroomMatch[1]);

            const insuranceMatch = text.match(patterns.insurance);
            if (insuranceMatch) {
                extracted.insurance = parseInt(insuranceMatch[1].replace(/,/g, ''));
            }

            const hoaMatch = text.match(patterns.hoa);
            if (hoaMatch) {
                extracted.hoa = parseInt(hoaMatch[1].replace(/,/g, ''));
            }

            const mgmtMatch = text.match(patterns.management);
            if (mgmtMatch) {
                extracted.managementPercent = parseInt(mgmtMatch[1]);
            }

            applyExtractedData(extracted);
        }

        function applyExtractedData(data) {
            const results = [];
            
            if (data.propertyPrice) {
                document.getElementById('propertyPrice').value = data.propertyPrice;
                results.push(`Property Price: ${formatCurrency(data.propertyPrice)}`);
            }

            if (data.age) {
                document.getElementById('propertyAge').value = data.age;
                results.push(`Property Age: ${data.age} years`);
                
                if (data.age > 20) {
                    document.getElementById('roofAge').value = Math.min(data.age - 5, 25);
                    document.getElementById('hvacAge').value = Math.min(data.age - 10, 20);
                    document.getElementById('waterHeaterAge').value = Math.min(data.age - 5, 12);
                }
            }

            if (data.rent) {
                document.getElementById('monthlyRent').value = data.rent;
                results.push(`Monthly Rent: ${formatCurrency(data.rent)}`);
            }

            if (data.taxes) {
                document.getElementById('propertyTax').value = data.taxes;
                results.push(`Annual Property Tax: ${formatCurrency(data.taxes)}`);
            }

            if (data.insurance) {
                document.getElementById('insurance').value = data.insurance;
                results.push(`Annual Insurance: ${formatCurrency(data.insurance)}`);
            }

            if (data.managementPercent) {
                document.getElementById('propertyManagement').value = data.managementPercent;
                results.push(`Property Management: ${data.managementPercent}%`);
            }

            if (data.propertyPrice && !data.taxes) {
                const estimatedTax = Math.round(data.propertyPrice * 0.012);
                document.getElementById('propertyTax').value = estimatedTax;
                results.push(`Estimated Property Tax: ${formatCurrency(estimatedTax)} (1.2% of value)`);
            }

            if (data.propertyPrice && !data.insurance) {
                const estimatedInsurance = Math.round(data.propertyPrice * 0.003);
                document.getElementById('insurance').value = estimatedInsurance;
                results.push(`Estimated Insurance: ${formatCurrency(estimatedInsurance)} (0.3% of value)`);
            }

            if (data.propertyPrice && !data.rent) {
                const estimatedRent = Math.round(data.propertyPrice * 0.008);
                document.getElementById('monthlyRent').value = estimatedRent;
                results.push(`Estimated Rent: ${formatCurrency(estimatedRent)} (0.8% rule - verify with local comps)`);
            }

            if (results.length > 0) {
                document.getElementById('extractedData').innerHTML = results.join('<br>');
                document.getElementById('parseResults').style.display = 'block';
                document.getElementById('parseResults').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            } else {
                alert('Could not extract any recognizable data from the listing text. Please check the format and try again, or enter data manually.');
            }
        }

        function showSampleData() {
            // Load sample property data for demo
            document.getElementById('propertyPrice').value = 285000;
            document.getElementById('downPayment').value = 25;
            document.getElementById('monthlyRent').value = 2100;
            document.getElementById('propertyAge').value = 18;
            document.getElementById('roofAge').value = 12;
            document.getElementById('hvacAge').value = 8;
            document.getElementById('waterHeaterAge').value = 6;
            document.getElementById('propertyTax').value = 3200;
            document.getElementById('insurance').value = 1100;
            document.getElementById('maintenance').value = 2200;
            
            alert('‚úÖ Sample property data loaded! PropertyPro Analyzer+ is now ready for analysis. Click "Generate Investment Analysis" to see the results.');
            
            // Scroll to the form
            document.querySelector('.input-section').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToDemo() {
            document.getElementById('demo').scrollIntoView({ behavior: 'smooth' });
        }

        function analyzeProperty() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';

            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const downPaymentPercent = parseFloat(document.getElementById('downPayment').value) || 20;
            const closingCostsPercent = parseFloat(document.getElementById('closingCosts').value) || 3;
            const interestRate = parseFloat(document.getElementById('interestRate').value) || 6.5;
            const loanTerm = parseInt(document.getElementById('loanTerm').value) || 30;
            const pmi = parseFloat(document.getElementById('pmi').value) || 0;
            
            const propertyAge = parseFloat(document.getElementById('propertyAge').value) || 0;
            const propertyCondition = document.getElementById('propertyCondition').value;
            const roofAge = parseFloat(document.getElementById('roofAge').value) || 0;
            const hvacAge = parseFloat(document.getElementById('hvacAge').value) || 0;
            const waterHeaterAge = parseFloat(document.getElementById('waterHeaterAge').value) || 0;
            
            const monthlyRent = parseFloat(document.getElementById('monthlyRent').value) || 0;
            const rentGrowth = parseFloat(document.getElementById('rentGrowth').value) || 3;
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const insurance = parseFloat(document.getElementById('insurance').value) || 0;
            const maintenance = parseFloat(document.getElementById('maintenance').value) || 0;
            const vacancyRate = parseFloat(document.getElementById('vacancy').value) || 5;
            const propertyManagement = parseFloat(document.getElementById('propertyManagement').value) || 0;
            
            const capexReserve = parseFloat(document.getElementById('capexReserve').value) || 150;
            const immediateRepairs = parseFloat(document.getElementById('immediateRepairs').value) || 0;
            
            const appreciation = parseFloat(document.getElementById('appreciation').value) || 3;
            const taxBracket = parseFloat(document.getElementById('taxBracket').value) || 24;
            const depreciationYears = parseFloat(document.getElementById('depreciationYears').value) || 27.5;

            if (propertyPrice <= 0 || monthlyRent <= 0) {
                alert('Please enter valid property price and monthly rent values.');
                document.getElementById('loading').style.display = 'none';
                return;
            }

            if (propertyPrice < 10000) {
                alert('Property price seems unrealistically low. Please verify the amount.');
                document.getElementById('loading').style.display = 'none';
                return;
            }

            if (monthlyRent < 100) {
                alert('Monthly rent seems unrealistically low. Please verify the amount.');
                document.getElementById('loading').style.display = 'none';
                return;
            }

            if (interestRate <= 0) {
                alert('Interest rate must be greater than 0%. Please enter a valid rate.');
                document.getElementById('loading').style.display = 'none';
                return;
            }

            setTimeout(() => {
                const downPaymentAmount = propertyPrice * (downPaymentPercent / 100);
                const closingCosts = propertyPrice * (closingCostsPercent / 100);
                const loanAmount = propertyPrice - downPaymentAmount;
                const monthlyMortgage = calculateMortgagePayment(loanAmount, interestRate, loanTerm);
                
                const grossMonthlyRent = monthlyRent;
                const vacancyLoss = grossMonthlyRent * (vacancyRate / 100);
                const managementFee = grossMonthlyRent * (propertyManagement / 100);
                const netMonthlyRent = grossMonthlyRent - vacancyLoss - managementFee;
                
                const monthlyPropertyTax = propertyTax / 12;
                const monthlyInsurance = insurance / 12;
                const monthlyMaintenance = maintenance / 12;
                const monthlyPMI = downPaymentPercent < 20 ? pmi : 0;
                
                const totalMonthlyExpenses = monthlyMortgage + monthlyPropertyTax + monthlyInsurance + monthlyMaintenance + monthlyPMI + capexReserve;
                const monthlyCashFlow = netMonthlyRent - totalMonthlyExpenses;
                const annualCashFlow = monthlyCashFlow * 12;
                
                const totalInitialInvestment = downPaymentAmount + closingCosts + immediateRepairs;
                const cashOnCashROI = totalInitialInvestment > 0 ? annualCashFlow / totalInitialInvestment : 0;
                const annualNetIncome = (grossMonthlyRent * 12) - (propertyTax + insurance + maintenance + (grossMonthlyRent * 12 * vacancyRate / 100) + (grossMonthlyRent * 12 * propertyManagement / 100));
                const capRate = propertyPrice > 0 ? annualNetIncome / propertyPrice : 0;
                
                const annualDepreciation = propertyPrice / depreciationYears;
                const taxableIncome = annualCashFlow - annualDepreciation;
                const annualTaxSavings = Math.max(0, -taxableIncome * (taxBracket / 100));
                
                const monthlyPrincipalPayment = monthlyMortgage - (loanAmount * (interestRate / 100 / 12));
                const equity5yr = monthlyPrincipalPayment * 12 * 5;
                const appreciation5yr = propertyPrice * Math.pow((1 + appreciation / 100), 5) - propertyPrice;
                const cashFlow5yr = annualCashFlow * 5;
                const taxSavings5yr = annualTaxSavings * 5;
                const totalReturn5yr = equity5yr + appreciation5yr + cashFlow5yr + taxSavings5yr;
                const totalROI5yr = totalReturn5yr / totalInitialInvestment;
                
                const breakEvenMonths = monthlyCashFlow > 0 ? totalInitialInvestment / monthlyCashFlow : 999;
                const dscrValue = (monthlyMortgage * 12) > 0 ? annualNetIncome / (monthlyMortgage * 12) : 0;
                const capexNeeds = calculateCapExNeeds(propertyAge, roofAge, hvacAge, waterHeaterAge, propertyCondition);

                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';

                const profitabilityEl = document.getElementById('profitabilityIndicator');
                if (monthlyCashFlow > 200 && cashOnCashROI > 0.08) {
                    profitabilityEl.className = 'profitability-indicator profitable';
                    profitabilityEl.textContent = '‚úÖ HIGHLY PROFITABLE INVESTMENT - STRONG MONTHLY INCOME';
                } else if (monthlyCashFlow > 0 && cashOnCashROI > 0.04) {
                    profitabilityEl.className = 'profitability-indicator break-even';
                    profitabilityEl.textContent = 'üü° PROFITABLE INVESTMENT - POSITIVE MONTHLY CASH FLOW';
                } else if (monthlyCashFlow >= -50) {
                    profitabilityEl.className = 'profitability-indicator break-even';
                    profitabilityEl.textContent = 'üü° BREAK-EVEN INVESTMENT - BUILDING EQUITY WITH MINIMAL COST';
                } else {
                    profitabilityEl.className = 'profitability-indicator not-profitable';
                    profitabilityEl.textContent = '‚ùå NEGATIVE CASH FLOW - REQUIRES MONTHLY CONTRIBUTION';
                }

                document.getElementById('monthlyProfit').textContent = formatCurrency(monthlyCashFlow);
                document.getElementById('annualProfit').textContent = formatCurrency(annualCashFlow);
                
                const total5YearProfit = cashFlow5yr + equity5yr + appreciation5yr + taxSavings5yr;
                document.getElementById('profit5yr').textContent = formatCurrency(total5YearProfit);
                
                const profitSection = document.getElementById('monthlyProfit').parentElement.parentElement.parentElement;
                if (monthlyCashFlow > 200) {
                    profitSection.style.background = 'linear-gradient(135deg, #2e7d32 0%, #388e3c 100%)';
                } else if (monthlyCashFlow > 0) {
                    profitSection.style.background = 'linear-gradient(135deg, #f57c00 0%, #ff9800 100%)';
                } else {
                    profitSection.style.background = 'linear-gradient(135deg, #d32f2f 0%, #f44336 100%)';
                }

                document.getElementById('cashFlow').textContent = formatCurrency(monthlyCashFlow);
                document.getElementById('roi').textContent = formatPercentage(cashOnCashROI);
                document.getElementById('capRate').textContent = formatPercentage(capRate);
                document.getElementById('totalROI').textContent = formatPercentage(totalROI5yr);
                document.getElementById('breakEven').textContent = breakEvenMonths > 0 && breakEvenMonths < 999 ? Math.round(breakEvenMonths) : 'Never';
                document.getElementById('dscrValue').textContent = dscrValue.toFixed(2);

                const cashFlowCard = document.getElementById('cashFlowCard');
                const roiCard = document.getElementById('roiCard');
                const capRateCard = document.getElementById('capRateCard');
                const totalROICard = document.getElementById('totalROICard');
                const breakEvenCard = document.getElementById('breakEvenCard');
                const dscrCard = document.getElementById('dscr');

                cashFlowCard.className = 'metric-card ' + (monthlyCashFlow > 200 ? 'positive' : monthlyCashFlow > 0 ? 'neutral' : 'negative');
                roiCard.className = 'metric-card ' + (cashOnCashROI > 0.08 ? 'positive' : cashOnCashROI > 0.04 ? 'neutral' : 'negative');
                capRateCard.className = 'metric-card ' + (capRate > 0.08 ? 'positive' : capRate > 0.05 ? 'neutral' : 'negative');
                totalROICard.className = 'metric-card ' + (totalROI5yr > 0.5 ? 'positive' : totalROI5yr > 0.2 ? 'neutral' : 'negative');
                breakEvenCard.className = 'metric-card ' + (breakEvenMonths < 60 ? 'positive' : breakEvenMonths < 120 ? 'neutral' : 'negative');
                dscrCard.className = 'metric-card ' + (dscrValue > 1.25 ? 'positive' : dscrValue > 1.0 ? 'neutral' : 'negative');

                document.getElementById('equity5yr').textContent = formatCurrency(equity5yr);
                document.getElementById('appreciation5yr').textContent = formatCurrency(appreciation5yr);
                document.getElementById('cashFlow5yr').textContent = formatCurrency(cashFlow5yr);
                document.getElementById('taxSavings5yr').textContent = formatCurrency(taxSavings5yr);

                document.getElementById('profitGrossRent').textContent = formatCurrency(grossMonthlyRent);
                document.getElementById('profitVacancyLoss').textContent = formatCurrency(-vacancyLoss);
                document.getElementById('profitMgmtFee').textContent = formatCurrency(-managementFee);
                document.getElementById('profitMortgage').textContent = formatCurrency(-monthlyMortgage);
                document.getElementById('profitTaxes').textContent = formatCurrency(-monthlyPropertyTax);
                document.getElementById('profitInsurance').textContent = formatCurrency(-monthlyInsurance);
                document.getElementById('profitMaintenance').textContent = formatCurrency(-monthlyMaintenance);
                document.getElementById('profitCapEx').textContent = formatCurrency(-capexReserve);
                document.getElementById('profitPMI').textContent = formatCurrency(-monthlyPMI);
                document.getElementById('profitFinalAmount').textContent = formatCurrency(monthlyCashFlow);

                document.getElementById('totalInvestment').textContent = formatCurrency(totalInitialInvestment);
                document.getElementById('annualDepreciation').textContent = formatCurrency(annualDepreciation);
                document.getElementById('annualTaxSavings').textContent = formatCurrency(annualTaxSavings);
                document.getElementById('equityBuild5yr').textContent = formatCurrency(equity5yr);
                document.getElementById('appreciationTotal5yr').textContent = formatCurrency(appreciation5yr);
                document.getElementById('taxSavingsTotal5yr').textContent = formatCurrency(taxSavings5yr);

                generateRisks(capexNeeds, monthlyCashFlow, dscrValue, propertyCondition, propertyAge);
                generateTips(monthlyCashFlow, cashOnCashROI, capRate, totalROI5yr, capexNeeds);

            }, 800);
        }

        function generateRisks(capexNeeds, cashFlow, dscr, condition, age) {
            const risks = [];
            
            if (cashFlow < 100) {
                risks.push("‚ö†Ô∏è Low cash flow buffer - any unexpected expense could create negative cash flow");
            }
            
            if (dscr < 1.2) {
                risks.push("‚ö†Ô∏è Low debt service coverage ratio - property barely covers mortgage payments");
            }
            
            if (condition === 'poor') {
                risks.push("‚ö†Ô∏è Poor property condition - expect significant repair costs and potential vacancy");
            }
            
            if (age > 40) {
                risks.push("‚ö†Ô∏è Older property - higher maintenance costs and potential major system failures");
            }
            
            const highPriorityCapEx = capexNeeds.filter(item => item.urgency === 'High');
            if (highPriorityCapEx.length > 0) {
                const totalHighPriority = highPriorityCapEx.reduce((sum, item) => sum + item.cost, 0);
                risks.push(`‚ö†Ô∏è Immediate CapEx needs: ${formatCurrency(totalHighPriority)} in high-priority repairs`);
            }
            
            risks.push("‚ö†Ô∏è Market risk - property values and rents can decline in economic downturns");
            risks.push("‚ö†Ô∏è Interest rate risk - rising rates could affect refinancing and property values");
            
            if (risks.length === 0) {
                risks.push("‚úÖ Low risk profile - property shows strong fundamentals");
            }

            const risksContainer = document.getElementById('risks');
            risksContainer.innerHTML = risks.map(risk => `<div class="risk-item">${risk}</div>`).join('');
        }

        function generateTips(cashFlow, roi, capRate, totalROI, capexNeeds) {
            const tips = [];
            
            if (cashFlow < 0) {
                tips.push("üí° Consider negotiating a lower purchase price or higher rent to improve cash flow");
                tips.push("üí° Look for ways to reduce expenses - shop for better insurance rates or tax appeals");
            } else if (cashFlow > 300) {
                tips.push("üéâ Strong cash flow! Consider this property for long-term wealth building");
            }
            
            if (roi < 0.06) {
                tips.push("üí° ROI below market expectations - consider other investment opportunities");
            } else if (roi > 0.12) {
                tips.push("üéâ Excellent ROI! This property could significantly boost your portfolio");
            }
            
            if (capexNeeds.length > 0) {
                tips.push("üí° Budget for upcoming capital expenditures - consider negotiating repair credits");
                tips.push("üí° Get professional inspections for all major systems before purchase");
            }
            
            tips.push("üí° Consider the neighborhood's growth potential and future development plans");
            tips.push("üí° Factor in your time investment for property management vs. hiring professionals");
            tips.push("üí° Build relationships with reliable contractors before you need them");
            tips.push("üí° Keep 6-12 months of expenses in reserves for unexpected costs");
            tips.push("üí° Consult a tax professional to maximize deductions and depreciation benefits");
            tips.push("üí° Consider cost segregation studies for properties over $500K to accelerate depreciation");

            const tipsContainer = document.getElementById('tips');
            tipsContainer.innerHTML = tips.map(tip => `<div class="tip-item">${tip}</div>`).join('');
        }

        function updatePMI() {
            const downPayment = parseFloat(document.getElementById('downPayment').value) || 20;
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const pmiField = document.getElementById('pmi');
            
            if (downPayment < 20 && propertyPrice > 0) {
                const loanAmount = propertyPrice * (1 - downPayment / 100);
                const estimatedPMI = Math.round((loanAmount * 0.005) / 12);
                pmiField.value = estimatedPMI;
                pmiField.style.backgroundColor = '#fff3cd';
                pmiField.setAttribute('title', 'PMI auto-calculated based on loan amount');
            } else {
                pmiField.value = 0;
                pmiField.style.backgroundColor = '';
                pmiField.removeAttribute('title');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('downPayment').addEventListener('input', updatePMI);
            document.getElementById('propertyPrice').addEventListener('input', updatePMI);
            
            const numberInputs = document.querySelectorAll('input[type="number"]');
            numberInputs.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.value < 0) this.value = 0;
                    
                    if (this.id === 'propertyPrice' && this.value > 10000000) {
                        this.value = 10000000;
                    }
                    if (this.id === 'interestRate' && this.value > 30) {
                        this.value = 30;
                    }
                    if ((this.id === 'downPayment' || this.id === 'vacancy' || this.id === 'propertyManagement') && this.value > 100) {
                        this.value = 100;
                    }
                });
                
                input.addEventListener('blur', function() {
                    if (this.id === 'propertyPrice' || this.id === 'monthlyRent' || this.id === 'propertyTax' || 
                        this.id === 'insurance' || this.id === 'maintenance' || this.id === 'immediateRepairs') {
                        if (this.value && !isNaN(this.value)) {
                            const formatted = parseInt(this.value).toLocaleString();
                            this.setAttribute('data-formatted', formatted);
                        }
                    }
                });
            });

            const textarea = document.getElementById('listingText');
            if (textarea) {
                textarea.addEventListener('focus', function() {
                    this.style.borderColor = '#4CAF50';
                    this.style.boxShadow = '0 0 0 3px rgba(76, 175, 80, 0.1)';
                });
                
                textarea.addEventListener('blur', function() {
                    this.style.borderColor = '#e0e0e0';
                    this.style.boxShadow = 'none';
                });
            }
        });
    </script>
</body>
</html>